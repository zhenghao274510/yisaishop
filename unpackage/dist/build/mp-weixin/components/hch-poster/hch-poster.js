(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/hch-poster/hch-poster"],{1778:function(t,e,n){"use strict";n.r(e);var i=n("e33f"),a=n("ed7d");for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("6ba4");var l,c=n("f0c5"),d=Object(c["a"])(a["default"],i["b"],i["c"],!1,null,"8dbf83aa",null,!1,i["a"],l);e["default"]=d.exports},"6ba4":function(t,e,n){"use strict";var i=n("fb64"),a=n.n(i);a.a},a24a:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(n("a34a")),a=n("8404");function o(t){return t&&t.__esModule?t:{default:t}}function l(t,e,n,i,a,o,l){try{var c=t[o](l),d=c.value}catch(r){return void n(r)}c.done?e(d):Promise.resolve(d).then(i,a)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var o=t.apply(e,n);function c(t){l(o,i,a,c,d,"next",t)}function d(t){l(o,i,a,c,d,"throw",t)}c(void 0)}))}}var d=n("1456").bass,r={props:{dataobject:{type:Object,default:function(){return{}}},type:{type:[String,Number],default:0}},data:function(){return{showPicker:!1,poster:{},canvasId:"goods_poster",shareInfo:{path:""}}},methods:{open:function(){this.showPicker=!0,this.shareFc()},close:function(){this.showPicker=!1},shareFc:function(){var e=this;return c(i.default.mark((function n(){var o,l;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=e,console.log(encodeURI("".concat(d,"/details/share?id=").concat(o.dataobject.id,"&type=").concat(e.type))),n.prev=2,console.log("准备生成:"+new Date),n.next=6,(0,a.getSharePoster)({_this:e,type:"goodsPoster",backgroundImage:"/static/img/invite_poster.png",formData:{},posterCanvasId:e.canvasId,delayTimeScale:20,drawDelayTime:500,bgScale:1,background:{width:t.getSystemInfoSync().screenWidth,height:.7*t.getSystemInfoSync().screenHeight,backgroundColor:"#fff"},drawArray:function(t){var n=t.bgObj,i=(t.type,t.bgScale,n.width,.05*n.width);n.height;return console.log(n),new Promise((function(t,a){t([{type:"text",text:"伊赛用心做好每一件商品！",size:.8*i,color:"#343434",backgroundColor:"#CCC",alpha:1,textAlign:"left",textBaseline:"middle",infoCallBack:function(t){return console.log("index页面的text的infocallback ，textlength:"+t),{dx:.5*n.width-t/2,dy:.07*n.height}},serialNum:0},{type:"image",url:o.dataobject.icon,alpha:1,dx:.15*n.width,dy:.15*n.width,infoCallBack:function(t){return console.log("index页面的imageInfo的infocallback ，imageInfo:"+JSON.stringify(t)),o.imageHeight=t.height,{dWidth:.7*n.width,dHeight:.55*n.height}}},{type:"text",text:o.dataobject.title,size:.9*i,color:"#343434",fontWeight:"bold",alpha:1,textAlign:"middle",textBaseline:"middle",lineFeed:{maxWidth:.5*n.width,lineNum:2,dx:-1},infoCallBack:function(t){return console.log("index页面的text的infocallback ，textlength:"+t),{dx:.05*n.width,dy:.76*n.height}},serialNum:0,id:"tag1"},{type:"text",text:o.dataobject.skuList[0].title,size:.6*i,color:"#9A9A9A",fontWeight:"bold",alpha:1,textAlign:"middle",textBaseline:"middle",lineFeed:{maxWidth:.8*n.width,lineNum:1,dx:-1},infoCallBack:function(t){return console.log("index页面的text的infocallback ，textlength:"+t),{dx:.05*n.width,dy:.9*n.height}},serialNum:0,id:"tag1"},{type:"text",text:"已销:".concat(o.dataobject.sales),size:.6*i,color:"#666",alpha:1,textAlign:"middle",textBaseline:"middle",infoCallBack:function(t){return console.log("index页面的text的infocallback ，textlength:"+t),{dx:.35*n.width,dy:.9*n.height}},serialNum:0,id:"tag1"},{type:"text",text:"现价:￥".concat(o.$api.parsePrice(o.dataobject.price)),size:.8*i,color:"#FF0000",alpha:1,textAlign:"middle",textBaseline:"middle",lineFeed:{maxWidth:.8*n.width,lineNum:1,dx:-1},infoCallBack:function(t){return console.log("index页面的text的infocallback ，textlength:"+t),{dx:.05*n.width,dy:.95*n.height}},serialNum:0,id:"tag1"},{type:"text",text:"原价:￥".concat(o.$api.parsePrice(o.dataobject.old_price)),size:.6*i,color:"#9A9A9A",alpha:1,textAlign:"middle",textBaseline:"middle",lineFeed:{maxWidth:.8*n.width,lineNum:1,dx:-1},infoCallBack:function(t){return console.log("index页面的text的infocallback ，textlength:"+t),{dx:.35*n.width,dy:.95*n.height}},serialNum:0,id:"tag1"},{type:"qrcode",text:"".concat(d,"/details/share?id=").concat(o.dataobject.id,"&type=").concat(e.type),size:100,alpha:1,dx:.65*n.width,dy:.7*n.height},{type:"text",text:"扫描二维码去购买",size:.6*i,color:"#343434",alpha:1,textAlign:"middle",textBaseline:"middle",infoCallBack:function(t){return console.log("index页面的text的infocallback ，textlength:"+t),{dx:.66*n.width,dy:.95*n.height}},serialNum:0}])}))},setCanvasWH:function(t){var n=t.bgObj;t.type,t.bgScale;e.poster=n}});case 6:l=n.sent,e.$set(e.poster,"finalPath",l.poster.tempFilePath),n.next=15;break;case 10:n.prev=10,n.t0=n["catch"](2),t.hideLoading(),e.$api.tip(JSON.stringify(n.t0)),console.log(JSON.stringify(n.t0));case 15:case"end":return n.stop()}}),n,null,[[2,10]])})))()},share:function(){var e=this;t.saveImageToPhotosAlbum({filePath:e.poster.finalPath,success:function(t){e.$api.tip("保存成功")},fail:function(t){e.$api.tip("保存失败")}}),e.close()},copyLink:function(){var e=this;t.setClipboardData({data:e.shareInfo.copyLink,success:function(){}})}}};e.default=r}).call(this,n("543d")["default"])},e33f:function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}));var a=function(){var t=this,e=t.$createElement;t._self._c},o=[]},ed7d:function(t,e,n){"use strict";n.r(e);var i=n("a24a"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},fb64:function(t,e,n){}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/hch-poster/hch-poster-create-component',
    {
        'components/hch-poster/hch-poster-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("1778"))
        })
    },
    [['components/hch-poster/hch-poster-create-component']]
]);
