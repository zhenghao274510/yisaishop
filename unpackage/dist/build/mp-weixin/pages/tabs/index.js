(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabs/index"],{"01e2":function(t,e,n){},5665:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}));var i={uniSearchBar:function(){return n.e("components/uni-search-bar/uni-search-bar").then(n.bind(null,"608b"))},sSwitch:function(){return n.e("components/s-switch/s-switch").then(n.bind(null,"8044"))}},a=function(){var t=this,e=t.$createElement,n=(t._self._c,0!=t.dataobject.vipProductList.length?t.__map(t.dataobject.vipProductList,(function(e,n){var i=t.__get_orig(e),a=t._f("parsePrice")(e.price),o=t._f("parsePrice")(e.old_price);return{$orig:i,f0:a,f1:o}})):null),i=0!=t.dataList.length?t.__map(t.dataList,(function(e,n){var i=t.__get_orig(e),a=t._f("parsePrice")(e.price),o=t._f("parsePrice")(e.old_price);return{$orig:i,f2:a,f3:o}})):null;t.$mp.data=Object.assign({},{$root:{l0:n,l1:i}})},o=[]},"76a6":function(t,e,n){"use strict";n.r(e);var i=n("a655"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},a655:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("a34a"));function a(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n,i,a,o,c){try{var s=t[o](c),r=s.value}catch(u){return void n(u)}s.done?e(r):Promise.resolve(r).then(i,a)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var c=t.apply(e,n);function s(t){o(c,i,a,s,r,"next",t)}function r(t){o(c,i,a,s,r,"throw",t)}s(void 0)}))}}var s=function(){n.e("components/uni-search-bar/uni-search-bar").then(function(){return resolve(n("608b"))}.bind(null,n)).catch(n.oe)},r=function(){n.e("components/mycom/swiper").then(function(){return resolve(n("0fc7"))}.bind(null,n)).catch(n.oe)},u=function(){n.e("components/mycom/navs").then(function(){return resolve(n("a40a"))}.bind(null,n)).catch(n.oe)},d=function(){n.e("components/mycom/homeList").then(function(){return resolve(n("5d06"))}.bind(null,n)).catch(n.oe)},l=function(){n.e("components/s-switch/s-switch").then(function(){return resolve(n("8044"))}.bind(null,n)).catch(n.oe)},h=function(){n.e("components/mycom/compline-pounp").then(function(){return resolve(n("7ee0"))}.bind(null,n)).catch(n.oe)},p=function(){Promise.all([n.e("common/vendor"),n.e("components/s-pull-scroll/index")]).then(function(){return resolve(n("57aa"))}.bind(null,n)).catch(n.oe)},f=function(){n.e("components/mycom/index-one-sku").then(function(){return resolve(n("73c5"))}.bind(null,n)).catch(n.oe)},g=function(){n.e("components/mycom/home-advert-modal").then(function(){return resolve(n("8935"))}.bind(null,n)).catch(n.oe)},m={components:{homeAdvertModal:g,complinePounp:h,uniSearchBar:s,homeBanner:r,sPullScroll:p,homeNavs:u,homeList:d,sSwitch:l,oneSkuSwiper:f},data:function(){return{currentobj:{},skuobject:{},qty:1,merchantId:"",skillimage:"",liveimage:"",defaultValue:"0",showSwitch:1,send_type:1,dataList:[],complineList:[],dataobject:{address:"",merchantname:"",read:"",distance:"",type:"",bannerList:[],adList:[],productCategoryList:[],couponList:[],vipProductList:[]},girdList:[],sendList:[]}},onLoad:function(){this.refresh()},onShow:function(){this.getUserdefaultval(),this.getCartNum()},onHide:function(){this.$refs["oneSKuSwiper"].hide(),this.$refs["homeAdvertModal"].close()},computed:{open:function(){return t.getStorageSync("open")},top:function(){return t.getSystemInfoSync()["statusBarHeight"]+54}},methods:{toggleSpec:function(e){t.getStorageSync("uid")?(this.skuobject=e,this.$refs["oneSKuSwiper"].open()):this.$api.navTo("/pages/index/author")},choseSku:function(t){this.currentobj=t},changeNum:function(t){this.qty=t},addCart:function(){var e=this;this.$api.loading("提交中...");var n={cmd:"addCart",uid:t.getStorageSync("uid"),merchantId:t.getStorageSync("merchantId"),type:this.send_type,skuId:this.currentobj.id,count:this.qty};console.log(n),this._reqw.post(n).then((function(n){t.hideLoading(),e.$api.tip(n.resultNote),0==n.result&&(e.$refs["oneSKuSwiper"].hide(),e.getCartNum())})).catch((function(t){}))},navsOnClick:function(){this.$api.switchTab("/pages/tabs/class")},switchValue:function(e){console.log(e),t.getStorageSync("uid")?(this.defaultValue=e.key+"",this.$api.navTo("/pages/public/distributionMode?id=".concat(this.defaultValue,"&type=1"))):this.$api.navTo("/pages/index/author")},userOptionsMode:function(){this.switchValue({key:this.defaultValue})},stockDetails:function(e){t.getStorageSync("uid")?this.$api.navTo("/pages/details/goodsDetails?id=".concat(e,"&type=5")):this.$api.navTo("/pages/index/author")},getUserdefaultval:function(){t.getStorageSync("defaultValue")&&(this.defaultValue=t.getStorageSync("defaultValue")),t.getStorageSync("showSwitch")?this.showSwitch=t.getStorageSync("showSwitch"):this.showSwitch=2,2!=t.getStorageSync("open")?t.getStorageSync("defaultValue")&&(0==t.getStorageSync("defaultValue")?this.send_type=2:this.send_type=1):this.send_type=3},refresh:function(){var t=this;this.$nextTick((function(){t.$refs.pullScroll.refresh()}))},pullDown:function(t){var e=this;setTimeout((function(){e.getRecommend(t),e.loadData(),e.getAdList(),e.getUserCompline()}),200)},userSeeMessage:function(){t.getStorageSync("uid")?this.$api.navTo("/pages/mineoptions/myMessage"):this.$api.navTo("/pages/index/author")},getAdList:function(){var t=this,e={cmd:"getAdList"};this._reqw.post(e).then((function(e){0==e.result?t.fromData(e.body.adList):t.$api.tip(e.resultNote)})).catch((function(t){}))},loadData:function(){var e=this;return c(i.default.mark((function n(){var a,o,c;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=new Object,o={cmd:"index",uid:t.getStorageSync("uid"),merchant_id:t.getStorageSync("merchantId"),lon:t.getStorageSync("point").longitude,lat:t.getStorageSync("point").latitude},n.next=4,e._reqw.post(o);case 4:if(c=n.sent,0==c.result){n.next=8;break}return e.$api.tip(c.resultNote),n.abrupt("return");case 8:e.dataobject=c.body,a.distance=c.body.distance,c.body.address=c.body.address.replace(t.getStorageSync("province"),"").replace(t.getStorageSync("city"),""),a.address=c.body.address,a.name=c.body.merchantname,t.setStorageSync("shop",a),2==c.body.type||3==c.body.type?t.setStorageSync("showSwitch",1):t.setStorageSync("showSwitch",2);case 15:case"end":return n.stop()}}),n)})))()},fromData:function(t){var e=this;console.log(t),t.forEach((function(t){t.type<=4?e.$set(e.girdList,t.type-1,t.image):5==t.type?e.skillimage=t.image:6==t.type&&(e.liveimage=t.image)})),console.log(this.girdList)},bigSee:function(t){0==t?this.$api.navTo("/pages/tabs/LimitedSecondsKill"):this.$api.navTo("/pages/tabs/live-page")},getUserCompline:function(){var e=this,n={cmd:"getCouponList",uid:t.getStorageSync("uid"),merchant_id:t.getStorageSync("merchantId")};this._reqw.post(n).then((function(t){0==t.result?0!=t.body.dataList.length?(e.complineList=t.body.dataList,e.$refs.complinePounp.open()):e.$refs.complinePounp.close():e.$api.tip(t.resultNote)})).catch((function(t){}))},complineOptions:function(e){var n=this;if(t.getStorageSync("uid")){var i={cmd:"getCoupon",uid:t.getStorageSync("uid"),id:e};this._reqw.post(i).then((function(t){0==t.result?(n.$api.tip("领取成功!"),n.complineList=[],n.getUserCompline()):n.$api.tip(t.resultNote)})).catch((function(t){}))}else this.$api.navTo("/pages/index/author")},getRecommend:function(e){var n=this;return c(i.default.mark((function a(){var o,c,s;return i.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return 1==e.page&&(n.dataList=[]),o={cmd:"getProductList",merchantId:t.getStorageSync("merchantId"),uid:t.getStorageSync("uid"),nowPage:e.page,top:2,flag:2},c=[],i.next=5,n._reqw.post(o);case 5:if(s=i.sent,0==s.result){i.next=9;break}return n.$api.tip(s.resultNote),i.abrupt("return");case 9:0==s.body.dataList.length?e.empty():s.body.dataList.forEach((function(t){c.push(t)})),n.dataList=n.dataList.concat(c),e.page>=s.body.totalPage?e.finish():e.success();case 10:case"end":return i.stop()}}),a)})))()},unsteady:function(e){if(console.log(e),t.getStorageSync("uid"))switch(e){case 0:this.$api.switchTab("/pages/tabs/class");break;case 1:this.$api.navTo("/pages/tabs/unsteadyBuy");break;case 2:this.$api.navTo("/pages/tabs/compliceCenter");break;case 3:this.$api.navTo("/pages/tabs/makeGroup");break}else this.$api.navTo("/pages/index/author")}}};e.default=m}).call(this,n("543d")["default"])},aad7:function(t,e,n){"use strict";(function(t){n("b4b3");i(n("66fd"));var e=i(n("b780"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},b780:function(t,e,n){"use strict";n.r(e);var i=n("5665"),a=n("76a6");for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("bc9c");var c,s=n("f0c5"),r=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"3fe4edd5",null,!1,i["a"],c);e["default"]=r.exports},bc9c:function(t,e,n){"use strict";var i=n("01e2"),a=n.n(i);a.a}},[["aad7","common/runtime","common/vendor"]]]);