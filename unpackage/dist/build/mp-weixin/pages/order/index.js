(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/index"],{4480:function(t,n,e){"use strict";e.r(n);var i=e("ba27"),o=e("7e4e");for(var a in o)"default"!==a&&function(t){e.d(n,t,(function(){return o[t]}))}(a);e("5421");var r,c=e("f0c5"),u=Object(c["a"])(o["default"],i["b"],i["c"],!1,null,"0d7fb455",null,!1,i["a"],r);n["default"]=u.exports},5421:function(t,n,e){"use strict";var i=e("65c4"),o=e.n(i);o.a},"65c4":function(t,n,e){},"7e4e":function(t,n,e){"use strict";e.r(n);var i=e("b72b"),o=e.n(i);for(var a in i)"default"!==a&&function(t){e.d(n,t,(function(){return i[t]}))}(a);n["default"]=o.a},b72b:function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=function(){e.e("components/s-switch/s-switch").then(function(){return resolve(e("8044"))}.bind(null,e)).catch(e.oe)},o=function(){Promise.all([e.e("common/vendor"),e.e("components/s-pull-scroll/index")]).then(function(){return resolve(e("57aa"))}.bind(null,e)).catch(e.oe)},a=function(){e.e("components/uni-swipe-action/uni-swipe-action").then(function(){return resolve(e("3f4a"))}.bind(null,e)).catch(e.oe)},r=function(){Promise.all([e.e("common/vendor"),e.e("components/uni-swipe-action-item/uni-swipe-action-item")]).then(function(){return resolve(e("255c"))}.bind(null,e)).catch(e.oe)},c={components:{sSwitch:i,sPullScroll:o,uniSwipeAction:a,uniSwipeActionItem:r},data:function(){return{options:[{text:"删除",style:{backgroundColor:"#dd524d"}}],itemId:"",top:0,tabIndex:0,tabCurrentIndex:0,load:!1,switchList:[{key:0,value:"同城订单"},{key:1,value:"总商城订单"}],dataList:[],navList:[{text:"全部",type:0},{text:"待支付",type:1},{text:"进行中",type:2},{text:"待评价",type:6},{text:"已完成",type:7}]}},onLoad:function(t){t.id&&(3==t.id?this.tabIndex=1:this.tabIndex=0)},onShow:function(){this.refresh()},methods:{changeSwitch:function(t){console.log(t),this.tabIndex=t.key,this.tabCurrentIndex=0,this.refresh()},change:function(t,n){this.itemId=n,console.log(t)},refresh:function(){var t=this;this.$nextTick((function(){t.$refs.pullScroll.refresh()}))},pullDown:function(t){var n=this;setTimeout((function(){n.loadData(t)}),200)},loadData:function(n){var e=this;if(!this.load){this.load=!0;var i=this.tabCurrentIndex;1==n.page&&(this.dataList=[]);var o={cmd:"orderList",uid:t.getStorageSync("uid"),flag:this.tabIndex-0+1,state:this.navList[i].type,merchant_id:t.getStorageSync("merchantId"),nowPage:n.page},a=[];this._reqw.post(o).then((function(t){0==t.result?(e.load=!1,0==t.body.dataList.length?n.empty():t.body.dataList.forEach((function(t){a.push(t)})),e.dataList=e.dataList.concat(a),n.page>=t.body.totalPage?n.finish():n.success()):(e.$api.tip(t.resultNote),n.empty())}))}},tabClick:function(t){this.tabCurrentIndex=t,this.refresh()},shareFired:function(){},evaOrder:function(t){this.$api.navTo("/pages/order/addEva?id=".concat(t))},logistics:function(t){this.$api.navTo("/pages/order/wuliu?expCode=".concat(t.expCode,"&expNo=").concat(t.expNo))},finishedOrder:function(n,e){var i=this;this.$api.showTip("确认收货吗?",(function(e){if(e.confirm){var o={cmd:"getOrder",uid:t.getStorageSync("uid"),id:n};i._reqw.post(o).then((function(t){0==t.result?(i.$api.tip("收货成功!"),i.refresh()):i.$api.tip(t.resultNote)})).catch((function(t){}))}}))},gotoDetails:function(t){this.$api.navTo("/pages/order/orderDetails?id=".concat(t.orderId))},cancalOrder:function(n,e){var i=this;this.$api.showTip("确认取消吗?",(function(e){if(e.confirm){var o={cmd:"cancelOrder",uid:t.getStorageSync("uid"),orderId:n};i._reqw.post(o).then((function(t){0==t.result?(i.$api.tip("取消成功!"),i.refresh()):i.$api.tip(t.resultNote)})).catch((function(t){}))}}))},payOrder:function(t){this.$api.navTo("/pages/order/payOrder?id=".concat(t.orderId,"&money=").concat(t.amount,"&type=order"))},deleteOrder:function(){var n=this;this.$api.showTip("确认删除吗?",(function(e){if(e.confirm){var i={cmd:"deleteOrder",id:n.itemId,uid:t.getStorageSync("uid")};n._reqw.post(i).then((function(t){0==t.result?(n.$api.tip("删除成功!"),n.refresh()):n.$api.tip(t.resultNote)})).catch((function(t){}))}}))}}};n.default=c}).call(this,e("543d")["default"])},ba27:function(t,n,e){"use strict";e.d(n,"b",(function(){return o})),e.d(n,"c",(function(){return a})),e.d(n,"a",(function(){return i}));var i={sSwitch:function(){return e.e("components/s-switch/s-switch").then(e.bind(null,"8044"))},uniSwipeAction:function(){return e.e("components/uni-swipe-action/uni-swipe-action").then(e.bind(null,"3f4a"))},uniSwipeActionItem:function(){return Promise.all([e.e("common/vendor"),e.e("components/uni-swipe-action-item/uni-swipe-action-item")]).then(e.bind(null,"255c"))}},o=function(){var t=this,n=t.$createElement,e=(t._self._c,t.__map(t.dataList,(function(n,e){var i=t.__get_orig(n),o=t._f("parsePrice")(n.amount);return{$orig:i,f0:o}})));t.$mp.data=Object.assign({},{$root:{l0:e}})},a=[]},f737:function(t,n,e){"use strict";(function(t){e("b4b3");i(e("66fd"));var n=i(e("4480"));function i(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,e("543d")["createPage"])}},[["f737","common/runtime","common/vendor"]]]);