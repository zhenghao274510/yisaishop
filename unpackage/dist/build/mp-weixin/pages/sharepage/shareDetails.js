(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/sharepage/shareDetails"],{"051a":function(t,e,n){"use strict";n.r(e);var o=n("4588"),i=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,(function(){return o[t]}))}(r);e["default"]=i.a},"2e9e5":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return o}));var o={bbsCountdown:function(){return n.e("components/bbs-countdown/bbs-countdown").then(n.bind(null,"c312"))},jyfParser:function(){return Promise.all([n.e("common/vendor"),n.e("components/jyf-parser/jyf-parser")]).then(n.bind(null,"f9bf"))},uniGoodsNav:function(){return n.e("components/uni-goods-nav/uni-goods-nav").then(n.bind(null,"2b01"))},hchPoster:function(){return Promise.all([n.e("common/vendor"),n.e("components/hch-poster/hch-poster")]).then(n.bind(null,"1778"))}},i=function(){var t=this,e=t.$createElement,n=(t._self._c,1!=t.isShow||1!=t.type&&2!=t.type||1!=t.type?null:t._f("parsePrice")(t.dataobject.price)),o=1!=t.isShow||1!=t.type&&2!=t.type||1!=t.type?null:t._f("parsePrice")(t.dataobject.old_price),i=1!=t.isShow||1==t.type||5!=t.type&&3!=t.type&&2!=t.type?null:t._f("parsePrice")(t.dataobject.price),r=1==t.isShow&&1!=t.type?t._f("parsePrice")(t.dataobject.old_price):null;t.$mp.data=Object.assign({},{$root:{f0:n,f1:o,f2:i,f3:r}})},r=[]},4588:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n("a34a"));function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n,o,i,r,c){try{var s=t[r](c),a=s.value}catch(u){return void n(u)}s.done?e(a):Promise.resolve(a).then(o,i)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var c=t.apply(e,n);function s(t){r(c,o,i,s,a,"next",t)}function a(t){r(c,o,i,s,a,"throw",t)}s(void 0)}))}}var s=function(){n.e("components/mycom/goods-swiper").then(function(){return resolve(n("b2a0"))}.bind(null,n)).catch(n.oe)},a=function(){Promise.all([n.e("common/vendor"),n.e("components/jyf-parser/jyf-parser")]).then(function(){return resolve(n("f9bf"))}.bind(null,n)).catch(n.oe)},u=function(){n.e("components/uni-number-box/uni-number-box").then(function(){return resolve(n("f69c"))}.bind(null,n)).catch(n.oe)},p=function(){n.e("components/mycom/eva-product-List").then(function(){return resolve(n("0547"))}.bind(null,n)).catch(n.oe)},h=function(){n.e("components/mycom/group-item-info").then(function(){return resolve(n("19fd"))}.bind(null,n)).catch(n.oe)},d=function(){n.e("components/uni-goods-nav/group-goods-nav").then(function(){return resolve(n("8c93"))}.bind(null,n)).catch(n.oe)},l=function(){n.e("components/uni-goods-nav/goods-nav").then(function(){return resolve(n("18d6"))}.bind(null,n)).catch(n.oe)},f=function(){n.e("components/mycom/sharePounp").then(function(){return resolve(n("d69b"))}.bind(null,n)).catch(n.oe)},g=function(){n.e("components/uni-goods-nav/uni-goods-nav").then(function(){return resolve(n("2b01"))}.bind(null,n)).catch(n.oe)},m=function(){n.e("components/mycom/one-sku-swiper").then(function(){return resolve(n("f303"))}.bind(null,n)).catch(n.oe)},y=function(){n.e("components/mycom/homePoup").then(function(){return resolve(n("ae97"))}.bind(null,n)).catch(n.oe)},b=function(){n.e("components/mycom/homeList").then(function(){return resolve(n("5d06"))}.bind(null,n)).catch(n.oe)},v=function(){Promise.all([n.e("common/vendor"),n.e("components/hch-poster/hch-poster")]).then(function(){return resolve(n("1778"))}.bind(null,n)).catch(n.oe)},S=function(){n.e("components/noshop/no-shop").then(function(){return resolve(n("a46f"))}.bind(null,n)).catch(n.oe)},$=function(){n.e("components/mycom/more-number-swiper").then(function(){return resolve(n("7b76"))}.bind(null,n)).catch(n.oe)},j={components:{hchPoster:v,goodsSwiper:s,goodsNav:l,goodsPounp:y,jyfParser:a,uniNumberBox:u,evaProductList:p,groupItemInfo:h,groupGoodsNav:d,sharePounp:f,uniGoodsNav:g,oneSkuSwiper:m,homeList:b,noShop:S,moreGroupSku:$},data:function(){return{isShow:1,point:{},killEndTime:0,flag:0,text:"",id:"",type:0,content:"",qty:1,send_type:0,creatGroup:0,currentGroup:{},currentobj:{title:"",price:"",old_price:"",stock:""},groupId:"",storeActivity:[],dataobject:{type:4,title:"",merchantphone:"",merchanttype:"",customerphone:"",collcet:1,price:"",vipprice:"",point:"",sypoint:"",icon:"",virtual:"",group_number:"",primary:"",start_time:"",end_time:"",sales:10,content:"",old_price:200,stocks:12,commentNumber:0,categoryName:"",images:[],skuList:[]},dataList:[]}},onLoad:function(e){if(e.id&&(this.type=e.type,this.id=e.id),e.q){console.log(e.q);var n=decodeURIComponent(e.q);this.id=this.getUrlCode(n).id,this.type=this.getUrlCode(n).type,console.log(n)}t.getStorageSync("uid")||this.getPosition()},onShow:function(){t.getStorageSync("uid")&&(5==this.type&&this.getStoreActivity(),this.getGoodsDetails(),this.getUserBuyType())},methods:{getUrlCode:function(t){for(var e=t.split("?")[1],n=new Object,o=e.split("&"),i=0;i<o.length;i++)n[o[i].split("=")[0]]=o[i].split("=")[1];return n},getPosition:function(){var t=this;return c(o.default.mark((function e(){var n;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getUserLocation();case 2:n=e.sent,console.log(n),n?(t.isShow=1,t.$api.navTo("/pages/sharepage/author")):t.isShow=2;case 5:case"end":return e.stop()}}),e)})))()},getUserBuyType:function(){2!=t.getStorageSync("open")?t.getStorageSync("defaultValue")&&(0==t.getStorageSync("defaultValue")?this.send_type=2:this.send_type=1):this.send_type=3},phoneOptions:function(){t.getStorageSync("uid")?this.$api.callPhone(this.dataobject.customerphone):this.$api.navTo("/pages/sharepage/author")},toggleSpec:function(){t.getStorageSync("uid")?4!=this.type&&(6!=this.type?(this.flag=1,this.$refs["oneSKuSwiper"].open()):this.$refs["moreGroupSku"].open()):this.$api.navTo("/pages/sharepage/author")},choseSku:function(t){this.currentobj=t,this.flag=1},changeNum:function(t){this.qty=t},choseGroupNumber:function(t){this.currentGroup=t,this.creatGroup=1},getStoreActivity:function(){var e=this,n={cmd:"getMerchantReductionList",id:this.id,type:this.type,merchantId:t.getStorageSync("merchantId")};this._reqw.post(n).then((function(t){0==t.result?e.storeActivity=t.body.merchantReductionList:e.$api.tip(t.resultNote)})).catch((function(t){}))},userLike:function(e){this.id=e.id,this.type=e.type,this.getGoodsDetails(),t.pageScrollTo({scrollTop:0,duration:30})},getGoodsDetails:function(){var e=this;this.$api.loading("加载中...");var n={cmd:"getProductById",merchantId:t.getStorageSync("merchantId"),uid:t.getStorageSync("uid"),type:this.type,id:this.id};this._reqw.post(n).then((function(n){t.hideLoading(),0==n.result?(e.dataobject=n.body,e.content=e.$api.formText(n.body.content)):e.$api.tip(n.resultNote)})).catch((function(t){}))},lookMoreGroup:function(){this.$refs["groupItemInfo"].open()},userAddpurch:function(e){t.getStorageSync("uid")?1==e.group?this.$api.tip("已经参加该团!"):(this.groupId=e.id,this.buyGoodsItem(this.type)):this.$api.navTo("/pages/sharepage/author")},morebuttonClick:function(e){t.getStorageSync("uid")?0==e.index?this.buyGoodsItem(6):0==this.creatGroup?this.$refs["moreGroupSku"].open():this.buyGoodsItem(7):this.$api.navTo("/pages/index/author")},itemClick:function(e){console.log(e),t.getStorageSync("uid")?1==this.type&&1==e.index||(0==e.index?(getApp().globalData.tabIndex=2,this.$api.reLaunch("/pages/index/index")):this.$refs.sharePounp.open()):this.$api.navTo("/pages/sharepage/author")},shareClick:function(t){console.log(t),0==t&&this.$refs["hchPoster"].open()},buttonClick:function(e){t.getStorageSync("uid")?(console.log(this.type,e),0==this.flag?this.$refs["oneSKuSwiper"].open():5==this.type?0==e.index?this.addCartItem():this.buyGoodsItem(this.type):1==this.type&&0==e.index?this.buyGoodsItem(6):this.buyGoodsItem(this.type)):this.$api.navTo("/pages/index/author")},addCartItem:function(){var e=this;this.$api.loading("提交中...");var n={cmd:"addCart",uid:t.getStorageSync("uid"),merchantId:t.getStorageSync("merchantId"),type:this.send_type,skuId:this.currentobj.id,count:this.qty};this._reqw.post(n).then((function(n){t.hideLoading(),e.$api.tip(n.resultNote)})).catch((function(t){}))},userStoreItem:function(){var e=this;if(t.getStorageSync("uid")){this.$api.loading("提交中...");var n="",o=0;1==this.dataobject.collcet?(n="取消",o=2):(n="收藏",o=1);var i={cmd:"collectProduct",uid:t.getStorageSync("uid"),id:this.id};this._reqw.post(i).then((function(i){t.hideLoading(),0==i.result?(e.$api.tip("".concat(n,"成功!")),e.dataobject.collcet=o):e.$api.tip(i.resultNote)})).catch((function(t){}))}else this.$api.navTo("/pages/sharepage/author")},buyGoodsItem:function(t){console.log(this.currentobj);var e=[],n={product_id:this.id,skuid:this.currentobj.id,title:this.dataobject.title,qty:this.qty,stock:this.currentobj.stock,name:this.currentobj.title,price:6==t||4==t?this.dataobject.old_price:7==t?this.currentGroup.price:this.currentobj.price,image:this.dataobject.icon,setId:this.currentGroup.id||""};e.push(n),1==this.type?this.$api.navTo("/pages/order/creatOrder?goods=".concat(encodeURIComponent(JSON.stringify(e)),"&type=").concat(t,"&id=").concat(this.groupId)):this.$api.navTo("/pages/order/creatOrder?goods=".concat(encodeURIComponent(JSON.stringify(e)),"&type=").concat(t))},downOrUpGoods:function(){this.dataobject.sypoint>=this.dataobject.point?this.$refs.goodsPounp.open():this.$api.tip("积分不足")}},onShareAppMessage:function(){return this.$refs.oneSKuSwiper.hide(),this.$refs.sharePounp.hide(),{title:this.dataobject.title,path:"/pages/details/goodsDetails?id=".concat(this.id,"&type=").concat(this.type)}}};e.default=j}).call(this,n("543d")["default"])},"6a93":function(t,e,n){},7856:function(t,e,n){"use strict";n.r(e);var o=n("2e9e5"),i=n("051a");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("da02");var c,s=n("f0c5"),a=Object(s["a"])(i["default"],o["b"],o["c"],!1,null,"87afa390",null,!1,o["a"],c);e["default"]=a.exports},"8efc":function(t,e,n){"use strict";(function(t){n("b4b3");o(n("66fd"));var e=o(n("7856"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},da02:function(t,e,n){"use strict";var o=n("6a93"),i=n.n(o);i.a}},[["8efc","common/runtime","common/vendor"]]]);